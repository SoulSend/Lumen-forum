# Lumen 论坛 - 生活技巧分享社区

Lumen论坛是一个专注于生活技巧分享的在线社区平台，采用Vue 3 + TypeScript开发，旨在让用户分享、发现和讨论各种实用的生活技巧，帮助人们提升生活品质。

## 项目概述

Lumen论坛提供了一个用户友好的平台，让人们可以发布生活中的实用技巧、经验和窍门。社区涵盖了多个生活领域，包括家居装饰、烹饪美食、旅行探索、健康养生和职场技能等。用户可以通过发帖、评论、点赞和收藏等方式参与互动，构建活跃的知识分享社区。

## 后端功能实现状态

### ✅ 已实现功能

#### 认证系统
- [x] 邮箱/手机验证码登录
- [x] Token认证机制
- [x] 用户会话管理
- [x] 自动用户注册
- [x] 登出功能

#### 用户管理
- [x] 用户信息查询（当前用户、指定用户）
- [x] 用户资料更新
- [x] 用户权限管理（管理员、版主）
- [x] 用户统计信息（声望、发帖数、评论数）

#### 内容管理
- [x] 分类管理（查询所有分类、指定分类）
- [x] 帖子列表查询（最新、用户、分类）
- [x] 帖子详情查询
- [x] 热门帖子推荐（按热度算法排序）
- [x] 推荐帖子展示（管理员推荐）
- [x] 分页查询支持

#### 系统架构
- [x] 微服务架构（4个核心服务）
- [x] 服务注册与发现（Nacos）
- [x] API网关路由（Spring Cloud Gateway）
- [x] 统一异常处理
- [x] 统一响应格式
- [x] 服务间通信（OpenFeign）

### 🚧 待实现功能

#### 内容创作与管理
- [ ] 帖子发布功能
- [ ] 帖子编辑功能
- [ ] 帖子删除功能
- [ ] 分类管理（增删改）

#### 互动功能
- [ ] 评论系统（发表、回复、删除）
- [ ] 点赞功能（帖子、评论）
- [ ] 收藏功能
- [ ] 最佳答案采纳

#### 用户扩展功能
- [ ] 用户关注/取消关注
- [ ] 关注列表/粉丝列表
- [ ] 私信系统
- [ ] 密码修改
- [ ] 用户设置

#### 管理功能
- [ ] 用户管理（封禁、权限调整）
- [ ] 内容审核（帖子、评论审核）
- [ ] 系统设置
- [ ] 数据统计分析

#### 高级功能
- [ ] 全文搜索（帖子、用户）
- [ ] 标签系统
- [ ] 通知系统
- [ ] 文件上传（图片、附件）

## 完整功能清单

### 1. 用户认证与管理
- **多种登录方式**：支持邮箱验证码、手机验证码登录
- **用户注册**：通过验证码注册新账户
- **用户登出**：安全登出并清除会话
- **权限管理**：支持普通用户、版主、管理员三种角色
- **记住登录状态**：支持长期登录选项
- **身份验证**：基于Token的安全认证机制

### 2. 用户资料管理
- **个人资料编辑**：用户名、头像、个人简介、联系方式等
- **头像上传**：支持头像图片上传和更换
- **封面图片**：支持个人主页封面图片设置
- **用户技能展示**：可添加和展示个人技能及等级
- **社交链接**：可添加个人社交媒体链接
- **隐私设置**：控制邮箱等信息的公开性
- **用户等级与声望**：基于活跃度和贡献度的用户成长体系

### 3. 帖子管理
- **帖子发布**：支持富文本编辑器创建帖子
- **帖子编辑**：作者可编辑自己的帖子
- **帖子删除**：作者和管理员可删除帖子
- **草稿保存**：支持保存未完成的帖子草稿
- **分类选择**：帖子必须选择所属分类
- **标签系统**：支持添加和创建标签
- **帖子置顶**：管理员可置顶重要帖子
- **精华帖子**：管理员可标记精华帖子
- **问答功能**：支持问答类帖子和最佳答案标记
- **帖子状态管理**：已解决、推荐等状态标记

### 4. 内容浏览与发现
- **首页展示**：热门帖子、推荐内容、生活技巧展示
- **分类浏览**：按分类查看帖子列表
- **帖子详情**：查看完整帖子内容和相关信息
- **热门排行**：按热度、时间等维度排序
- **推荐算法**：基于用户行为的内容推荐
- **侧边栏信息**：热门标签、活跃用户、最新活动
- **分页加载**：支持分页和无限滚动加载
- **内容筛选**：按时间范围、热度等条件筛选

### 5. 搜索功能
- **全文搜索**：搜索帖子标题和内容
- **分类搜索**：在特定分类中搜索
- **标签搜索**：按标签筛选内容
- **用户搜索**：搜索用户资料
- **搜索建议**：实时搜索建议和历史记录
- **高级筛选**：按时间、热度等条件筛选
- **搜索结果分类**：帖子、用户、标签分类显示

### 6. 互动功能
- **评论系统**：支持多级评论和回复
- **点赞功能**：对帖子和评论点赞
- **收藏功能**：收藏喜欢的帖子
- **关注用户**：关注感兴趣的用户
- **私信功能**：用户间私信交流
- **分享功能**：分享帖子到社交媒体
- **最佳回答**：问答帖子的最佳答案功能
- **互动统计**：查看、点赞、评论数量统计

### 7. 通知系统
- **互动通知**：评论、点赞、收藏等通知
- **系统通知**：平台公告和重要更新
- **通知管理**：标记已读、筛选、删除通知
- **实时提醒**：新通知的实时推送
- **通知分类**：按类型分类显示通知
- **通知设置**：自定义通知偏好

### 8. 用户中心
- **个人主页**：展示用户信息和发布内容
- **发布历史**：查看用户发布的所有帖子
- **评论历史**：查看用户的评论记录
- **收藏列表**：管理收藏的帖子
- **关注列表**：管理关注的用户
- **粉丝列表**：查看关注自己的用户
- **活动记录**：用户在社区的活动轨迹

### 9. 设置与偏好
- **账号设置**：修改基本账号信息
- **安全设置**：密码修改、手机绑定等
- **隐私设置**：控制信息公开程度
- **通知设置**：自定义通知偏好
- **主题设置**：界面主题和显示偏好
- **个人资料设置**：详细的个人信息管理

### 10. 管理功能
- **内容审核**：管理员审核帖子和评论
- **用户管理**：管理用户权限和状态
- **分类管理**：创建和管理帖子分类
- **标签管理**：管理系统标签
- **统计分析**：查看平台数据统计
- **权限控制**：基于角色的权限管理

### 11. 社区特色功能
- **生活技巧推荐**：每日推荐实用生活技巧
- **热门话题**：展示当前热门讨论话题
- **社区统计**：展示平台活跃度和内容数据
- **推荐阅读**：精选优质内容推荐
- **社区活动**：展示最新社区动态

### 12. 技术特性
- **响应式设计**：完整的移动端、平板、桌面端适配
- **性能优化**：图片懒加载、分页加载等优化
- **SEO友好**：搜索引擎优化支持
- **无障碍访问**：支持无障碍访问标准
- **国际化支持**：多语言界面支持框架

## 技术栈

### 前端技术
- **框架**: Vue 3 (Composition API)
- **语言**: TypeScript
- **状态管理**: Pinia
- **路由**: Vue Router 4
- **UI组件库**: Element Plus
- **HTTP客户端**: Axios
- **构建工具**: Vite
- **样式**: CSS3 + Sass
- **图标**: Material Icons + Font Awesome
- **字体**: 多种优质字体支持

### 编辑器支持
- **TinyMCE**: 功能丰富的富文本编辑器
- **Wang Editor**: 轻量级富文本编辑器
- **Vue Quill**: 基于Quill的Vue编辑器
- **多编辑器切换**: 用户可选择偏好的编辑器

### 开发工具
- **代码规范**: ESLint + Prettier
- **类型检查**: TypeScript
- **自动导入**: unplugin-auto-import
- **组件自动导入**: unplugin-vue-components
- **开发工具**: Vue DevTools

### 后端接口 (API对接)
- **架构**: Spring Cloud微服务架构
- **认证**: JWT Token认证
- **API设计**: RESTful API
- **数据格式**: JSON
- **分页**: 统一分页响应格式
- **错误处理**: 统一错误码和响应格式

### 数据库设计
- **数据库**: MySQL 8.0+
- **字符集**: UTF8MB4
- **表设计**: 规范化设计，支持外键约束
- **索引优化**: 针对查询性能的索引设计

## 详细项目结构

```
user/                              # 项目根目录
│
├── api_documentation.md           # API接口文档，详细说明了后端接口规范和用法
├── lumen_database.sql             # 数据库结构SQL脚本，包含表结构和关系定义
├── index.html                     # 项目入口HTML文件，包含基本页面结构和字体资源
├── env.d.ts                       # 环境变量类型声明文件
├── README.md                      # 项目说明文档
├── package.json                   # 项目依赖配置和脚本定义
├── package-lock.json              # 依赖版本锁定文件
├── vite.config.ts                 # Vite构建工具配置文件
├── tsconfig.json                  # TypeScript主配置文件
├── tsconfig.app.json              # 应用程序TypeScript配置
├── tsconfig.node.json             # Node环境TypeScript配置
│
├── public/                        # 公共静态资源目录
│   └── favicon.ico                # 网站图标
│
└── src/                           # 源代码目录
    ├── App.vue                    # 应用根组件，包含用户状态初始化逻辑
    ├── main.ts                    # 应用入口文件，配置和挂载Vue应用
    │
    ├── assets/                    # 静态资源目录
    │   ├── base.css               # 基础样式，定义颜色、间距、字体等变量
    │   ├── main.css               # 主样式文件，包含全局样式定义
    │   ├── default-avatar.png     # 默认用户头像
    │   └── logo.svg               # 网站Logo
    │
    ├── components/                # 组件目录
    │   ├── common/                # 通用组件
    │   │   ├── AuthRequired.vue   # 权限检查组件，用于控制需要登录才能访问的内容
    │   │   ├── LoginModal.vue     # 登录弹窗组件，支持多种登录方式
    │   │   └── LoginPrompt.vue    # 登录提示组件，用于引导未登录用户
    │   │
    │   ├── forum/                 # 论坛相关组件
    │   │   ├── CommentList.vue    # 评论列表组件，用于显示和管理帖子评论
    │   │   └── PostCard.vue       # 帖子卡片组件，用于在列表中展示帖子概要
    │   │
    │   └── layout/                # 布局组件
    │       ├── Footer.vue         # 页脚组件，包含站点信息和链接
    │       ├── Header.vue         # 页头组件，包含导航、搜索和用户菜单
    │       ├── MainLayout.vue     # 主布局组件，定义页面整体结构
    │       └── Sidebar.vue        # 侧边栏组件，显示分类、热门标签等信息
    │
    ├── directives/                # Vue自定义指令
    │   └── permission.ts          # 权限指令，用于基于用户权限控制UI元素的显示
    │
    ├── pages/                     # 页面组件
    │   ├── About.vue              # 关于页面，展示站点信息
    │   ├── Category.vue           # 分类页面，展示特定分类下的帖子
    │   ├── CreatePost.vue         # 发布帖子页面，包含富文本编辑器
    │   ├── EditPost.vue           # 编辑帖子页面，用于修改已有帖子
    │   ├── Home.vue               # 首页，展示推荐内容和热门帖子
    │   ├── NotFound.vue           # 404页面，处理未找到的路由
    │   ├── Notifications.vue      # 通知中心页面，管理用户通知
    │   ├── PostDetail.vue         # 帖子详情页，展示完整帖子内容和评论
    │   ├── Search.vue             # 搜索结果页面，展示搜索匹配的内容
    │   ├── Settings.vue           # 用户设置页面，管理账户和偏好设置
    │   └── UserProfile.vue        # 用户资料页面，展示用户信息和发布的内容
    │
    ├── router/                    # 路由配置
    │   └── index.ts               # 路由定义文件，配置页面路由和导航守卫
    │
    ├── services/                  # API服务
    │   └── api.ts                 # API请求封装，提供与后端交互的方法
    │
    ├── stores/                    # Pinia状态管理
    │   ├── categoryStore.ts       # 分类数据状态管理
    │   ├── postStore.ts           # 帖子数据状态管理
    │   └── userStore.ts           # 用户数据和认证状态管理
    │
    ├── types/                     # TypeScript类型定义
    │   └── forum.ts               # 论坛相关的接口和类型定义
    │
    └── utils/                     # 工具函数
        └── permission.ts          # 权限相关的辅助函数
```

## 核心文件功能说明

### 入口文件
- **src/App.vue**: 应用程序根组件，负责初始化用户状态和路由渲染
- **src/main.ts**: 应用入口文件，配置和挂载Vue应用，注册全局组件和插件

### 核心组件功能

#### 布局组件 (Layout Components)
- **MainLayout.vue**: 主布局组件
  - 定义页面基本结构（头部、内容区、侧边栏）
  - 响应式布局适配
  - 全局样式和主题管理

- **Header.vue**: 页头组件
  - 网站Logo和主导航菜单
  - 智能搜索框（支持建议和历史记录）
  - 用户菜单（登录状态、通知、设置）
  - 响应式导航菜单

- **Sidebar.vue**: 侧边栏组件
  - 分类列表展示
  - 热门标签云
  - 活跃用户列表
  - 最新活动动态

- **Footer.vue**: 页脚组件
  - 站点信息和版权
  - 友情链接
  - 联系方式

#### 论坛组件 (Forum Components)
- **PostCard.vue**: 帖子卡片组件
  - 帖子预览信息展示
  - 作者信息和头像
  - 分类和标签显示
  - 统计数据（浏览、点赞、评论）
  - 置顶、精华等状态标记
  - 响应式卡片布局

- **CommentList.vue**: 评论列表组件
  - 多级评论和回复显示
  - 评论排序和筛选
  - 评论互动功能（点赞、回复）
  - 最佳答案标记
  - 评论分页加载

#### 通用组件 (Common Components)
- **AuthRequired.vue**: 权限检查组件
  - 基于用户角色的权限控制
  - 未登录用户的友好提示
  - 权限不足的处理

- **LoginModal.vue**: 登录弹窗组件
  - 多种登录方式支持
  - 验证码发送和验证
  - 表单验证和错误处理
  - 记住登录状态选项

- **LoginPrompt.vue**: 登录提示组件
  - 引导未登录用户登录
  - 友好的提示界面
  - 快速登录入口

### 页面组件
- **src/pages/Home.vue**: 首页，展示推荐内容、热门帖子和社区动态
- **src/pages/PostDetail.vue**: 帖子详情页，显示完整帖子内容和评论区
- **src/pages/CreatePost.vue**: 发布帖子页面，集成富文本编辑器和表单验证
- **src/pages/UserProfile.vue**: 用户个人资料页，展示用户信息和内容列表

### 状态管理
- **src/stores/userStore.ts**: 用户状态管理，处理登录、注册和用户信息
- **src/stores/postStore.ts**: 帖子状态管理，处理帖子的获取
- **src/stores/categoryStore.ts**: 分类状态管理，处理分类数据的获取和缓存

### 工具和服务
- **src/services/api.ts**: API服务，封装了与后端交互的HTTP请求方法
- **src/utils/permission.ts**: 权限工具，提供权限检查和控制的功能
- **src/directives/permission.ts**: 权限指令，用于在模板中基于权限控制UI元素

## 安装和运行

### 环境要求
- Node.js 16+
- npm 或 yarn

### 安装步骤

1. 克隆项目代码
```bash
git clone [仓库URL]
cd lumen-forum
```

2. 安装依赖
```bash
npm install
# 或
yarn install
```

3. 开发环境运行
```bash
npm run dev
# 或
yarn dev
```

4. 构建生产版本
```bash
npm run build
# 或
yarn build
```

## 主要页面功能

### 1. 首页 (Home.vue)
- **热门讨论区域**：展示按热度排序的帖子，支持今日/本周/本月筛选
- **推荐阅读区域**：精选优质内容，包含主推荐和侧边推荐
- **生活技巧区域**：专门展示生活技巧类帖子
- **社区统计**：显示总帖子数、注册用户数、解决方案数
- **搜索功能**：顶部搜索框支持快速搜索
- **分页加载**：支持加载更多帖子

### 2. 帖子详情页 (PostDetail.vue)
- **完整内容展示**：显示帖子标题、内容、作者信息、发布时间
- **互动功能**：点赞、收藏、分享按钮
- **评论系统**：完整的评论列表和回复功能
- **作者权限**：作者可编辑自己的帖子
- **统计信息**：浏览量、点赞数、评论数、收藏数
- **标签展示**：显示帖子相关标签

### 3. 分类页面 (Category.vue)
- **分类帖子列表**：显示特定分类下的所有帖子
- **排序选项**：支持按时间、热度等排序
- **分页浏览**：支持分页查看更多内容
- **分类信息**：显示分类描述和统计信息

### 4. 发布帖子页面 (CreatePost.vue)
- **富文本编辑器**：支持多种格式的内容编辑
- **分类选择**：必须选择帖子所属分类
- **标签管理**：可选择现有标签或创建新标签
- **草稿保存**：自动保存草稿功能
- **发布设置**：各种发布选项和权限设置
- **进度指示**：显示发布进度和完成状态

### 5. 编辑帖子页面 (EditPost.vue)
- **内容修改**：编辑已发布的帖子内容
- **权限验证**：只有作者可以编辑自己的帖子
- **版本保存**：保存编辑历史
- **预览功能**：编辑时可预览效果

### 6. 用户资料页面 (UserProfile.vue)
- **个人信息展示**：头像、用户名、简介、加入时间等
- **统计数据**：发帖数、评论数、声望值、关注数
- **内容列表**：用户发布的帖子和评论历史
- **社交功能**：关注、私信按钮（非本人）
- **资料编辑**：个人资料编辑功能（本人）
- **技能展示**：用户技能和等级展示
- **社交链接**：个人社交媒体链接

### 7. 搜索结果页面 (Search.vue)
- **多类型搜索**：支持搜索帖子、用户、标签
- **结果分类**：按类型分类显示搜索结果
- **高级筛选**：支持多种筛选条件
- **搜索建议**：提供搜索建议和技巧
- **分页结果**：支持分页浏览搜索结果

### 8. 通知中心 (Notifications.vue)
- **通知分类**：全部、未读、评论、点赞、系统通知
- **批量操作**：全部标为已读、批量删除
- **通知详情**：点击查看通知详细内容
- **实时更新**：新通知实时显示
- **通知管理**：单个通知的标记和删除

### 9. 设置页面 (Settings.vue)
- **个人资料设置**：修改基本个人信息
- **安全设置**：密码修改、手机绑定
- **隐私设置**：控制信息公开程度
- **通知设置**：自定义通知偏好
- **账号管理**：账号相关的各种设置

### 10. 关于页面 (About.vue)
- **平台介绍**：Lumen论坛的介绍和理念
- **功能说明**：主要功能的详细说明
- **联系方式**：平台联系方式和反馈渠道
- **使用条款**：用户协议和隐私政策

### 11. 404页面 (NotFound.vue)
- **友好提示**：页面未找到的友好提示
- **导航建议**：提供返回首页等导航选项
- **搜索建议**：建议用户使用搜索功能

## 开发指南

### 代码规范
- 遵循ESLint和Prettier配置
- 组件使用PascalCase命名
- 文件使用kebab-case命名

### 组件开发
- 使用组合式API (Composition API)
- 注重组件复用和逻辑分离
- 使用TypeScript类型定义确保类型安全

### 状态管理
- 使用Pinia进行状态管理
- 模块化设计，按功能划分store

## 权限管理系统

### 角色权限体系
系统实现了基于角色的权限控制(RBAC)：

#### 1. 游客权限
- **内容浏览**：查看帖子列表和详情
- **搜索功能**：搜索帖子、用户、标签
- **分类浏览**：按分类查看内容
- **用户资料**：查看用户公开信息
- **限制**：无法互动、评论、点赞

#### 2. 注册用户权限
- **内容发布**：创建、编辑、删除自己的帖子
- **互动功能**：评论、点赞、收藏、分享
- **用户关注**：关注其他用户，查看关注列表
- **个人中心**：管理个人资料和设置
- **通知系统**：接收和管理各类通知
- **私信功能**：与其他用户私信交流

#### 3. 版主权限
- **内容管理**：审核、编辑、删除帖子和评论
- **用户管理**：管理特定分类下的用户行为
- **帖子置顶**：在负责分类中置顶帖子
- **最佳答案**：标记问答帖子的最佳回答
- **分类管理**：管理指定分类的内容

#### 4. 管理员权限
- **系统管理**：完整的系统管理权限
- **用户管理**：管理所有用户权限和状态
- **内容管理**：管理所有内容和分类
- **数据统计**：查看平台数据和分析
- **系统设置**：修改系统配置和参数

### 权限控制实现
- **路由守卫**：基于用户角色的路由访问控制
- **组件权限**：使用AuthRequired组件控制内容显示
- **指令权限**：v-permission指令控制UI元素显示
- **API权限**：后端接口的权限验证
- **动态权限**：基于用户状态的动态权限检查

## 本地开发与测试

### 开发环境配置
```bash
# 环境变量配置 (.env.local)
VITE_API_URL=http://localhost:8080/api
VITE_APP_TITLE=Lumen论坛
VITE_APP_DESCRIPTION=生活技巧分享社区
```

### 测试数据说明
为方便本地开发和测试，系统提供了以下测试功能：

#### 测试账号
- **手机登录**：任意手机号 + 验证码"123456"
- **邮箱登录**：任意邮箱 + 验证码"123456"
- **测试用户**：系统会自动创建测试用户数据

#### 测试内容
- **帖子ID 999**：提供完整的测试帖子内容
- **帖子ID 888**：提供可编辑的测试帖子
- **分类数据**：预设的分类和标签数据
- **用户数据**：模拟的活跃用户数据

#### 开发工具
- **Vue DevTools**：Vue开发者工具支持
- **热重载**：代码修改实时预览
- **错误提示**：详细的开发错误信息
- **API Mock**：本地API模拟支持

### 数据库初始化
```sql
-- 使用提供的SQL文件初始化数据库
mysql -u root -p < lumen_database.sql
```

### 常见开发问题
1. **跨域问题**：Vite配置了代理解决跨域
2. **图片上传**：开发环境使用本地存储
3. **权限测试**：可通过修改用户角色测试不同权限
4. **API调试**：使用浏览器开发者工具查看网络请求

## 贡献指南

欢迎贡献代码、报告问题或提出新功能建议。请遵循以下步骤：

1. Fork项目仓库
2. 创建功能分支 (`git checkout -b feature/amazing-feature`)
3. 提交更改 (`git commit -m 'Add some amazing feature'`)
4. 推送到分支 (`git push origin feature/amazing-feature`)
5. 创建Pull Request

## 协议

本项目采用MIT许可证 - 详情见LICENSE文件
